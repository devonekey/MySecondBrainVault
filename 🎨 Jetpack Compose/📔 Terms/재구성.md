---
aliases:
  - Recomposition
importance: Highest
originated from:
  - "[[📘 젯팩 컴포즈로 개발하는 안드로이드 UI/1장 - 컴포즈 앱 첫 빌드]]"
  - "[[📘 젯팩 컴포즈로 개발하는 안드로이드 UI/2장 - 선언적 패러다임 이해]]"
  - "[[📘 코틀린 코루틴의 정석/3장 - CoroutineDispatcher]]"
answered by:
  - GPT
  - Claude
tags:
  - Jetpack
  - Compose
  - 컴포즈
  - Terms
  - 주요_개념
learned:
---
##### ℹ️ Description
---
- [컴포즈](젯팩%20컴포즈.md) UI를 갱신하는 일련의 과정
- 컴포즈의 상태 기반의 UI 갱신 메커니즘
- [상태](상태.md)가 변경됐을 때, 기존 UI를 다시 그리지 않고 필요한 부분만 선택적으로 다시 실행하는 과정

##### ⭐️ Feature
---
- 선택적 재구성: 전체 화면을 다 그리지 않고 변경된 부분만 다시 실행
- 자동 추적: [선언형 UI](선언형%20UI.md)로, 상태가 변경되면 컴포즈가 알아서 UI를 다시 그려줌
- 멱등성: 같은 입력에 대해 여러 번 실행해도 동일한 결과를 보장해야 함
- 순서 독립성: 재구성은 순서에 관계없이 안전하게 실행되어야 함
- 비동기 처리: 재구성은 백그라운드 스레드에서도 발생할 수 있음

##### ⚙️ Mechanism
---
1. 상태 추적: 컴포저블 함수가 실행되면서 `State` 객체를 읽을 때, 컴포즈는 이 관계를 추적함
2. 상태 변경 감지: [mutableStateOf](mutableStateOf.md) 함수 등으로 생성된 상태 객체의 값이 변경되면 컴포즈 런타임이 이를 감지함
3. 재구성 스케쥴링: 변경된 상태를 읽는 컴포저블들이 재구성 대상으로 스케줄링됨
4. 선택적 재실행: 영향받는 컴포저블만 다시 실행됨
5. UI 갱신: 재실행 결과를 바탕으로 UI 트리가 갱신되고 화면에 반영

##### 👍 Advantage
---
- 개발자가 직접 `invalidate`나 `notifyDataSetChanged` 함수 같은 명령형 UI 갱신 코드를 호출할 필요가 없어짐

##### 🏃‍♂️ When does it run?
---
- 상태 변경될 때
- 부모 컴포저블이 재구성될 때
- 입력 값이 변경될 때
- Composition이 변경될 필요가 있을 때

##### ⚠️ Warning
---
- 컴포저블 함수 본문에서 상태 변경, 네트워크 요청, 데이터베이스 접근 등의 부수 효과를 직접 수행하지 않아야 함
	- `LaunchEffect`, `SideEffect` 등의 API를 사용
- 재구성은 예상보다 자주, 또는 언제든지 발생할 수 있으므로 빠르고 가벼워야 함
- [remember](remember.md)나 `drivedStateOf`를 통해 불필요한 재구성을 최소화해야 함
